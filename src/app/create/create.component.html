<app-header>

</app-header>
<div class="container">
    <div class="creation" *ngIf="!submitted">
        <mat-accordion>
            <form [formGroup]="quizForm">
              <div class="formHeader">
                  <mat-form-field>
                      <input id="quizName" placeholder="Quiz Name" matInput formControlName="quizName" required>
                  </mat-form-field>
                  <button mat-stroked-button color="primary" (click)="addQuestion()">
                    Add Question
                </button>
              </div>

                <div formArrayName="questions">
                    <mat-expansion-panel *ngFor="let question of formQuestions.controls; let i = index;"
                        [formGroupName]="i"
                        [ngClass]="{'invalid': !question.valid}"
                        expanded='true'>

                        <mat-expansion-panel-header>
                            <mat-panel-title>
                              <mat-form-field>
                                <input formControlName="question" placeholder=" Question #{{i+1}}" matInput  (keydown)="$event.stopPropagation()">
                            </mat-form-field>
                            </mat-panel-title>
                            <mat-panel-description>
                            </mat-panel-description>
                        </mat-expansion-panel-header>




                        <mat-divider></mat-divider>
                        <mat-radio-group formControlName="correct" required>
                            <mat-radio-button [value]="value(question.controls.option1.value)" >

                            </mat-radio-button>

                            <mat-form-field>

                                <input formControlName="option1" matInput name="test" placeholder="Option" required>
                            </mat-form-field>

                            <mat-radio-button [value]="value(question.controls.option2.value)">
                            </mat-radio-button>
                            <mat-form-field>

                                <input formControlName="option2" matInput placeholder="Option" required>
                            </mat-form-field>

                            <br>

                            <mat-radio-button [value]="value(question.controls.option3.value)">
                            </mat-radio-button>
                            <mat-form-field>

                                <input formControlName="option3" matInput placeholder="Option" required>
                            </mat-form-field>

                            <mat-radio-button [value]="value(question.controls.option4.value)">
                            </mat-radio-button>
                        </mat-radio-group>
                        <mat-form-field>

                            <input formControlName="option4" matInput placeholder="Option" required>
                        </mat-form-field>
                    </mat-expansion-panel>
                </div>


            </form>

        </mat-accordion>

        <div class="buttons">
          <button
            mat-stroked-button color="primary"
            [disabled]="!quizForm.valid || formQuestions.controls.length < 1"
            (click)="onSubmit()">
              Make Quiz
          </button>
        </div>
    </div>
    <div *ngIf="submitted">
        <mat-card>
            <mat-card-content>
                Your quiz link is: <br>
                quizzy-vbruzzi.herokuapp.com/quiz/<span>{{quizUrl}}</span>
            </mat-card-content>
        </mat-card>
    </div>

</div>
<app-footer>

</app-footer>
